<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
    />
    <title>Sludgate Brass Band</title>
    <link
            rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="stylesheet" th:href="@{/css/customContentWrapper.css}"/>
    <link rel="stylesheet" th:href="@{/css/customBody.css}"/>
</head>
<body>

    <div th:if="${memberType.equals('Adult') || memberType.equalsIgnoreCase('Non-Adult')}">
        <div th:replace="~{fragments/navbar-for-logged-in-users}"></div>
    </div>
    <div th:if="${memberType.equals('Committee')}">
        <div th:replace="~{fragments/nav-bar-for-logged-in-committee}"></div>
    </div>
    <div th:if="${memberType.equals('Director')}">
        <div th:replace="~{fragments/navbar-for-logged-in-director}"></div>
    </div>


    <div class="content-wrapper">
    <h2>Committee View</h2>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="performance-tab" data-toggle="tab" href="#performance" role="tab" aria-controls="performance" aria-selected="true">Performance Schedule</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="instrument-tab" data-toggle="tab" href="#instrument" role="tab" aria-controls="instrument" aria-selected="false">Instrument, but should be items</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="music-tab" data-toggle="tab" href="#music" role="tab" aria-controls="music" aria-selected="false">Music</a>
        </li>
    </ul>


    <div class="tab-content mt-3" id="myTabContent">
        <div class="tab-pane fade show active" id="performance" role="tabpanel" aria-labelledby="performance-tab">
            <h3>Performance Schedule</h3>
            <p>
                In the performance schedule tab for committee members, clicking on a performance will display a
                list of the names of players who will be available for the performance (in addition to the information
                that can be seen in the member view).
            </p>
        </div>


        <div class="tab-pane fade" id="music" role="tabpanel" aria-labelledby="music-tab">
            <h3>Music, but should be items rather than instruments</h3>
            <p>
                In the music tab for committee members, if an item is selected there will be the option to put it into
                practice (in which case, the band(s) must be specified) (this indicates that it has been handed out to
                members of that band(s)) or return to storage.

                In the music tab for committee members there will also be an “outstanding orders” button, which
                will take the user to a list of outstanding orders, in the order in which they were created. A
                committee member can gather the requested music for an order and mark it as ready; once it is
                delivered/collected the status should be changed to fulfilled and the order should be removed from
                this list and archived.
            </p>
        </div>

        <div class="tab-pane fade" id="instrument" role="tabpanel" aria-labelledby="instrument-tab">
            <!-- Insert Instruments table -->
            <p>In the items tab for committee members, each item will indicate if it is on loan (and if so, to whom).
            After selecting an item there will be the option to loan/return that item. If the item is being loaned,
            the committee member will have to type the full name (as stored in the member record) of the
            member. If a match is found, the item will then be associated with that member. If the item is being
            returned, the association with a user will be removed.</p>
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>Instrument</th>
                    <th>Make</th>
                    <th>Serial Number</th>
                    <th>In Storage</th>
                    <th>Note</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="instrument: ${instruments}">
                    <td th:text="${instrument.item.nameTypeOrTitle}"></td>
                    <td th:text="${instrument.item.makeOrComposer}"></td>
                    <td th:text="${instrument.serialNumber}"></td>
                    <td>
                        <span th:if="${instrument.item?.inStorage}" class="badge badge-success">Yes</span>
                        <span th:if="${!instrument.item?.inStorage}" class="badge badge-danger">No</span>
                    </td>
                    <td th:text="${instrument.item.note}"></td>
                    <td>
                        <button class="btn btn-primary"
                                data-toggle="modal"
                                data-target="#editInstrumentModal"
                                th:attr="data-id=${instrument.id}"
                                onclick="populateEditForm(this)"> Edit </button>
                    </td>
                </tr>
                </tbody>
            </table>
            <!-- Button to add instruments to inventory -->
            <button class="btn btn-primary" data-toggle="modal" data-target="#addInstrument">
                Add Instrument</button>

            <!-- Type modal with form to add instrument-->
            <div class="modal fade" id="addInstrument" tabindex="-1" role="dialog"
                 aria-labelledby="addInstrument" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addInstrumentLabel">Add Instrument</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <form th:action="@{/committee/addInstrument}" method="post">
                            <div class="modal-body">
                                <div class="form-group" >
                                    <label for="instrumentInput">Instrument:</label>
                                    <input type="text" class="form-control" id="instrumentInput" name="instrumentInput" required>
                                </div>
                                <div class="form-group">
                                    <label for="make">Make:</label>
                                    <input type="text" class="form-control" id="make" name="make" required>
                                </div>
                                <div class="form-group">
                                    <label for="serialNumber">Serial Number:</label>
                                    <input type="text" class="form-control" id="serialNumber" name="serialNumber" required>
                                </div>
                                <div class="form-group">
                                    <label>In Storage?</label>
                                </div>
                                <div class="form-group">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="inStorage" id="inStorageYes" value="true" checked>
                                        <label class="form-check-label" for="inStorageYes">Yes</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="inStorage" id="inStorageNo" value="false">
                                        <label class="form-check-label" for="inStorageNo">No</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="note">Note:</label>
                                    <input type="text" class="form-control" id="note" name="note">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary btn-submit">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Type modal to edit or delete instrument -->
            <div class="modal fade" id="editInstrumentModal" tabindex="-1" role="dialog" aria-labelledby="editInstrumentModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editInstrumentModalLabel">Edit Instrument</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <form th:action="@{/committee/editInstrument}" method="post">
                            <div class="modal-body">
                                <input type="hidden" id="editInstrumentId" name="instrumentId"/>
                                <div class="form-group">
                                    <label for="editInstrumentInput">Instrument:</label>
                                    <input type="text" class="form-control" id="editInstrumentInput" name="instrumentInput" required>
                                </div>
                                <div class="form-group">
                                    <label for="editMake">Make:</label>
                                    <input type="text" class="form-control" id="editMake" name="make" required>
                                </div>
                                <div class="form-group">
                                    <label for="editSerialNumber">Serial Number:</label>
                                    <input type="text" class="form-control" id="editSerialNumber" name="serialNumber" required>
                                </div>
                                <div class="form-group">
                                    <label>In Storage?</label>
                                </div>
                                <div class="form-group">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="inStorage" id="editInStorageYes" value="true">
                                        <label class="form-check-label" for="editInStorageYes">Yes</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="inStorage" id="editInStorageNo" value="false">
                                        <label class="form-check-label" for="editInStorageNo">No</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="editNote">Note:</label>
                                    <input type="text" class="form-control" id="editNote" name="note">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary btn-submit">Save</button>
                            </div>
                        </form>
                        <!-- Button to delete an Instrument -->
                        <form id="deleteForm" th:action="@{/committee/deleteInstrument}" method="post" style="display: inline;">
                            <input type="hidden" name="instrumentId" id="deleteInstrumentId" />
                            <button type="button" class="btn btn-danger" id="deleteButton" onclick="confirmDelete()">
                                Delete
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Buttons for Add Child, Child View, and Committee View -->
<div class="floating-buttons">
    <button class="btn btn-primary" data-toggle="modal" data-target="#addChildModal">Add Child</button>
</div>

<!-- Add Child Modal -->
<div class="modal fade" id="addChildModal" tabindex="-1" role="dialog" aria-labelledby="addChildModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addChildModalLabel">Add Child</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form th:action="@{/addChild}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <input type="text" class="form-control" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
<footer>
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script th:src="@{js/editInstrument.js}"></script>
    <script th:src="@{js/confirmDelete.js}"></script>
</footer>


</body>
</html>
